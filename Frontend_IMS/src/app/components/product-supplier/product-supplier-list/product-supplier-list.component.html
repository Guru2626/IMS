<div class="container mt-4">

  <!-- Header Row -->
  <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap">
    <h4 class="mb-0">Product Catalogue</h4>
     

    <div class="d-flex align-items-center gap-2 mt-2 mt-sm-0">
      <!-- Search Box -->
      <input
        type="text"
        class="form-control"
        style="width: 250px;"
        placeholder="üîç Search by Product Name..."
        [(ngModel)]="searchTerm"
        (input)="onSearchChange()"
      />

      <!-- Add Button (Admin only) -->
      <button
        *ngIf="userRole === 'ROLE_ADMIN'"
        class="btn btn-primary"
        (click)="navigateToAddProductSupplier()">
        ‚ûï Add Supplier Product
      </button>
    </div>
  </div>

  <!-- Messages -->
  <div *ngIf="errorMsg" class="alert alert-danger">{{ errorMsg }}</div>
  <div *ngIf="successMsg" class="alert alert-success">{{ successMsg }}</div>

  <!-- Table -->
  <div class="table-responsive bg-white rounded shadow-sm">
    <table class="table table-striped align-middle mb-0">
      <thead class="table-light">
        <tr>
          <th>ID</th>
          <th>Product</th>
          <th>Category</th>
          <th>Supplier</th>
          <th>Supply Price (Per Stock)</th>
          <th>Days To Supply</th>

          <!-- Admin Columns -->
          <ng-container *ngIf="userRole === 'ROLE_ADMIN'">
            <th>Edit</th>
            <th>Delete</th>
          </ng-container>

          <!-- Manager Column -->
          <ng-container *ngIf="userRole === 'ROLE_MANAGER'">
            <th>Purchase</th>
          </ng-container>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let ps of filteredProductSuppliers">
          <td>{{ ps.id }}</td>
          <td>{{ ps.productName }}</td>
          <td>{{ ps.categoryName }}</td>
          <td>{{ ps.supplierName }}</td>
          <td>{{ ps.supplyPrice | currency:'INR':'symbol':'1.0-0' }}</td>
          <td>{{ ps.leadTimeDays }}</td>

          <!-- Admin Actions -->
          <ng-container *ngIf="userRole === 'ROLE_ADMIN'">
            <td>
              <button
                class="btn btn-sm btn-warning"
                title="Edit"
                (click)="navigateToUpdateProductSupplier(ps.id)">
                ‚úèÔ∏è
              </button>
            </td>
            <td>
              <button
                class="btn btn-sm btn-danger"
                title="Delete"
                (click)="deleteProductSupplier(ps.id)">
                üóëÔ∏è
              </button>
            </td>
          </ng-container>

          <!-- Manager Action -->
          <ng-container *ngIf="userRole === 'ROLE_MANAGER'">
            <td>
              <button
                class="btn btn-sm btn-success"
                title="Purchase"
                (click)="navigateTopurchaseProduct(ps)">
                üí∞ Purchase
              </button>
            </td>
          </ng-container>
        </tr>

        <!-- No records found -->
        <tr *ngIf="filteredProductSuppliers.length === 0">
          <td colspan="10" class="text-center text-muted py-3">
            No products found.
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <br>
  

  <button class="btn btn-secondary btn-sm" (click)="goBack()">
      ‚Üê Back
    </button>
</div>
